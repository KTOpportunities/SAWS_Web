<section class="section-3">
    <div class="container">
      <div class="content">
        <div class="content-wrap">
          <div class="user-managemnt-group">
            <div class="group-hero">
              <div class="group-hero_l">
                <div class="group-hero_text">
                  <mat-icon>filter_list</mat-icon>
                  <div>                    
                    Filter by
                  </div>
                </div>
                <div data-hover="false" data-delay="0" class="w-dropdown"></div>
                <div 
                  data-hover="false" 
                  data-delay="0" 
                  class="w-dropdown">
                    <div
                      mat-button
                      [matMenuTriggerFor]="nameMenu"
                      class="dropdown-toggle w-dropdown-toggle"
                      >
                      <div class="icon w-icon-dropdown-toggle"></div>
                      <div class="text-block">
                        {{ selectedStatusName !== '' ? selectedStatusName : "Status" }}
                      </div>
                    </div>
                    <mat-menu
                      #nameMenu="matMenu">
                      <button
                        *ngFor="let status of statuses"
                        (click)="selectStatus(status.status)"
                          mat-menu-item
                        >
                          <span class="w-dropdown-link-2">
                            {{ status.name }}
                          </span>
                        </button>
                    </mat-menu>
                </div>
                <div
                  (click)="openPicker()"
                  data-hover="false" 
                  data-delay="0" 
                  class="w-dropdown">
                  <div class="dropdown-toggle w-dropdown-toggle">
                    <div class="icon w-icon-dropdown-toggle"></div>
                    <div class="text-block">
                    {{ selectedDateString ? selectedDateString : "Received Date" }}
                  </div>
                  </div>
                </div>
                <div>
                  <input
                  [matDatepicker]="picker"
                  #datepickerTrigger
                  class="filterDate"
                  (dateInput)="selectDate('input', $event)"
                />
            
                <mat-datepicker #picker class="filterDate"></mat-datepicker>
                </div>

                <div
                  *ngIf="isFilterActive()"
                  (click)="clearFilter()"
                  class="dropdown-toggle-3 w-dropdown-toggle text-block"
                  >
                  clear filters
                </div>
              </div>
              <a
                (click)="viewSubscribersByFeedback()"
                class="button w-inline-block">
                <div class="button-text">Broadcast</div>
              </a>
              
            </div>
          </div>
  
          <mat-table 
            #feedbackTable
            id="feedbackTable"
            mat-table
            [dataSource]="dataSource" 
            matSort 
            class="mat-elevation-z8"
            #adminsSort="matSort"
            >           
              <!-- Full Name Column -->
              <ng-container matColumnDef="fullname">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                  Full Name
                </mat-header-cell>
                <mat-cell *matCellDef="let feedback">
                    {{ feedback.fullname }} 
                </mat-cell>
              </ng-container>
    
              <!-- Email Column -->
              <ng-container matColumnDef="email">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                  Email
                </mat-header-cell>
                <mat-cell *matCellDef="let feedback"> {{ feedback.senderEmail }} </mat-cell>
              </ng-container>
    
              <!-- Created Date Column -->
              <ng-container matColumnDef="created_at">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                  Last Received Date
                </mat-header-cell>
                <mat-cell *matCellDef="let feedback"> 
                   {{ feedback.updated_at | date : "short" }}
                </mat-cell>
              </ng-container>
    
              <!-- Status Column -->
              <ng-container matColumnDef="status">
                <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
                <mat-cell *matCellDef="let feedback" >
                  <div class="status" [ngClass]="{ 'status-active': feedback.isresponded }">
                    <span class="status-text">
                        {{ feedback.isresponded
                        ? 'Responded' : 'UnAnswered' }}
                    </span>
                  </div>
                </mat-cell>
              </ng-container>
    
              <!-- Action Column -->
              <ng-container matColumnDef="action">
                <mat-header-cell *matHeaderCellDef> Action </mat-header-cell>
                <mat-cell *matCellDef="let feedback">
                  <!-- Add your action buttons/icons here -->
                  <button
                    mat-icon-button
                    [matMenuTriggerFor]="actionMenu"
                    class="mat-button mat-horizontal-menu" 
                  >
                    <mat-icon style="color: #323259">
                      <svg style="color: #323259" xmlns="http://www.w3.org/2000/svg" width="24.51" height="6.128" viewBox="0 0 24.51 6.128">
                        <path id="Icon_metro-more-horiz" data-name="Icon metro-more-horiz" d="M10.776,15.424a3.064,3.064,0,1,0,3.064,3.064A3.063,3.063,0,0,0,10.776,15.424Zm18.383,0a3.064,3.064,0,1,0,3.064,3.064A3.063,3.063,0,0,0,29.159,15.424Zm-9.191,0a3.064,3.064,0,1,0,3.064,3.064,3.063,3.063,0,0,0-3.064-3.064Z" transform="translate(-7.712 -15.424)" fill="#1f6a45"/>
                      </svg>
                  </mat-icon>
                  </button>
    
                  <mat-menu #actionMenu="matMenu" class="mat-horizontal-menu">
                    <button mat-menu-item (click)="navigateToViewFeedback(feedback.feedbackId)">
                      <mat-icon>visibility</mat-icon> View
                    </button>
                    <button mat-menu-item (click)="deleteFeedback(feedback.feedbackId)">
                      <mat-icon style="color: red">delete</mat-icon> Delete
                    </button>
                  </mat-menu>
                </mat-cell>
              </ng-container>
  
            <!-- Table Header Row -->
            <mat-header-row 
              *matHeaderRowDef="displayedColumns; sticky: true"
            ></mat-header-row>
            <!-- Table Rows --> 
            <!-- (click)="selection.toggle(row)" -->
            <mat-row            
              *matRowDef="let row; 
              columns: displayedColumns"
            ></mat-row>

            <tr class="mat-row" *matNoDataRow>
              <td class="mat-cell" colspan="4">
                No data matching the filter "{{dataSource.filter}}"
              </td>
            </tr>
          </mat-table>
          <mat-paginator
            #paginator
            [length]="TotalRecords"
            [pageIndex]="currentPage"
            [pageSize]="pageSize"
            [pageSizeOptions]="[5, 10, TotalRecords]"
            (page)="pageChanged($event)"
            aria-label="Select page"
            showFirstLastButtons
            aria-label="'Select page of admins'"
          ></mat-paginator>
        </div>
      </div>
      <div
        data-w-id="717ec873-5bdf-1582-6da6-888fecad4a6e"
        class="nav-shadow"
      ></div>
    </div>
    <div class="custom-css w-embed">
      <style>
        /*width*/
        .scroll::-webkit-scrollbar {
          height: 2px;
        }
        /*track*/
        .scroll::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0);
        }
        /*thumb*/
        .scroll::-webkit-scrollbar-thumb {
          background: rgb(233, 229, 221);
          border-radius: 1000px;
        }
      </style>
    </div>
  </section>

 